<section class="center">
  <div class="end">
    <button [hidden]="estaLogeadoCliente()==false" mat-button routerLink="/dashboard-comprador/eventos-comprador"
      color="primary">Mirar mis compras</button>
  </div>
  <div>
    <h1>Eventos</h1>
  </div>
</section>
<div class="container">
  <h4>Busqueda de eventos</h4>
</div>

<div class="container">
  <form class="row" [formGroup]="form">
    <mat-form-field class="col-md-12" appearance="fill">
      <mat-label>Buscar por nombre</mat-label>
      <input type="text" matInput autocomplete="off" formControlName="nombre">
      <button mat-icon-button matSuffix (click)="getEventosPorNombre()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field class="col-md-4" appearance="fill">
      <mat-label>Buscar por precio</mat-label>
      <input type="text" matInput autocomplete="off" formControlName="precio">
      <button mat-icon-button matSuffix (click)="getEventosPorPrecio()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field class="col-md-4" appearance="fill">
      <mat-label>Buscar por direccion</mat-label>
      <input type="text" matInput autocomplete="off" formControlName="direccion">
      <button mat-icon-button matSuffix (click)="getEventosPorDireccion()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field class="col-md-4" appearance="fill">
      <mat-label>Buscar por fecha</mat-label>
      <input matInput [matDatepicker]="picker" autocomplete="off" formControlName="fecha">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <button mat-icon-button matSuffix (click)="getEventosPorFecha()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <br>
  </form>
</div>


<div class="container">
  <table class="table table-striped table-bordered">
    <tbody>
      <tr *ngFor="let evento of eventos
          | paginate: { itemsPerPage: 25, currentPage: page }">
        <mat-card>
          <mat-card-title>Nombre del evento: {{evento.nombre}}
            <h1 *ngIf="evento.estado==='cancelado'">({{evento.estado}})</h1>
          </mat-card-title>
          <mat-card-subtitle>Dirección: {{evento.lugar}}</mat-card-subtitle>
          <mat-card-subtitle>Precio: {{evento.precio}}</mat-card-subtitle>
          <mat-card-subtitle [hidden]="!evento.cancelable">Este evento es cancelable hasta {{evento.plazo}} dias antes
            del evento</mat-card-subtitle>
          <mat-card-subtitle [hidden]="evento.cancelable">Este evento no es cancelable</mat-card-subtitle>
          <mat-card-actions>
            <button mat-button (click)="entrarEvento(evento)">Mas información</button>
            <button *ngIf="evento.estado==='pendiente'" [hidden]=" eventoTerminado(evento)" mat-button
              (click)="comprarTickets(evento)">Comprar tickets</button>
            <!-- <button mat-button (click)="comentar(evento)">Ver comentarios</button>
                  <button mat-button (click)="calificar(evento)">Ver calificacion</button>-->
          </mat-card-actions>
        </mat-card>
        <br>
      </tr>
    </tbody>
  </table>
</div>

<pagination-controls (pageChange)="page = $event" previousLabel="Anterior" nextLabel="Siguiente"></pagination-controls>